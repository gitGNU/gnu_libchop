# do not edit -- automatically generated by arch changelog
# arch-tag: automatic-ChangeLog--lcourtes@laas.fr--2004-mosaic/libchop--main--0.1
#

2005-09-06 11:59:16 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-53

    Summary:
      Slightly augmented the tools that relate to the anchor-based chopper.
    Revision:
      libchop--main--0.1--patch-53

    * include/chop/chop.h (_CHOP_UNUSED):  New macro.
    
    * include/chop/logs.h (_chop_log_printf):  Marked as `_CHOP_UNUSED'.
    
    * src/chopper-anchor-based.c (chop_anchor_chopper_read_block):  When an
      anchor is detected, push the contents of the window as well.  This also
      further simplifies the algorithm.
      (ab_generic_open):  Use a default window size of 48 bytes.
    
    * utils/chop-show-anchors.c:  Added options for debugging, statistics,
      verbosity, and window size.
    
    * utils/chop-show-similarities.c:  Added options for debugging and window
      size.

    modified files:
     ChangeLog include/chop/chop.h include/chop/logs.h
     src/chopper-anchor-based.c utils/chop-show-anchors.c
     utils/chop-show-similarities.c


2005-09-05 16:56:21 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-52

    Summary:
      Bugfix in `stream-file.c';  workaround in `store-tdb.c'.
    Revision:
      libchop--main--0.1--patch-52

    * src/stream-file.c (chop_file_stream_open):  Fixed the oldest bug out
      there:  arg 2 of `madvise' was uninitialized.
    
    * src/store-tdb.c (chop_tdb_store_open):  Pass `TDB_NOLOCK' to `tdb_open ()' 
      in order to work around a bug found on the PPC.
    
    * include/chop/logs.c (_chop_log_printf):  Don't declare it inline since
      it's not inlinable.

    modified files:
     ChangeLog include/chop/logs.h src/store-tdb.c
     src/stream-file.c


2005-09-05 14:43:45 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-51

    Summary:
      Optimized the sliding window mechanism in `chopper-anchor-based.c'.
    Revision:
      libchop--main--0.1--patch-51

    * include/chop/logs.h (chop_log_printf):  Made a macro so that it could
      be inlined.
      (_chop_log_printf):  New name of the actual function.
    
    * src/chopper-anchor-based.c (sliding_window_t)[raw_size]:  New field.
      [raw_window]:  New field.
      (sliding_window_init):  Allocate contiguous subwindows.
      (read_sliding_window):  Pad data with zeros when needed.
      (sliding_window_get_raw_offset):  New macro.
      (sliding_window_ref):  New macro.
      (sliding_window_first_char):  Rewritten, became a macro.
      (sliding_window_last_char):  Likewise.
      (sliding_window_destroy):  Updated.

    modified files:
     ChangeLog include/chop/logs.h src/chopper-anchor-based.c


2005-09-02 16:42:11 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-50

    Summary:
      Implemented inlining of Lightning code in chopper-anchor-based.c;  turns out to be inefficient.
    Revision:
      libchop--main--0.1--patch-50

    * src/chopper-anchor-based.c (INLINE_LIGHTNING_CODE):  New macro.
      (jit_multiplier_func_t):  New typedef.
      (jit_multiplier_t):  Define it as a struct when INLINE_LIGHTNING_CODE
      is defined.
      (JIT_MULTIPLIER_INIT):  New macro.
      (JIT_MULTIPLIER_FUNC):  New macro.
      (compile_multiplication_function):  If INLINE_LIGHTNING_CODE, compile
      code that can be inlined eventually.
      (compute_next_window_fingerprint):  If INLINE_LIGHTNING_CODE, well,
      inline Lightning code by patching the right instructions.

    modified files:
     ChangeLog src/chopper-anchor-based.c


2005-09-02 15:44:00 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-49

    Summary:
      Partially rewrote and hopefully fixed the anchor-based chopper.
    Revision:
      libchop--main--0.1--patch-49

    * src/Makefile.am (AM_CFLAGS):  Added `-Winline'.
    
    * src/chopper-anchor-based.c (sliding_window_t):  Changed the `offset'
      field into an single integer instead of an array.
      (sliding_window_end):  Renamed to `sliding_window_unfull'.
      (sliding_window_end_offset):  Fixed
      (sliding_window_skip):  New function.
      (sliding_window_increase_offset):  Renamed to
      `sliding_window_increment_offset' and changed the semantics.
      (chop_anchor_chopper_read_block):  Simplified and (hopefully) fixed a
      bug.
    
    * tests/interfaces/choppers.c:  Instrumented as a debugging aid.
    
    * utils/chop-show-anchors.c:  Likewise.

    modified files:
     ChangeLog src/Makefile.am src/chopper-anchor-based.c
     tests/interfaces/choppers.c utils/chop-show-anchors.c


2005-09-01 16:38:29 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-48

    Summary:
      Fixed the `chop_log_t' API to avoid memory leaks.
    Revision:
      libchop--main--0.1--patch-48

    * include/chop/logs.h (chop_log_t):  Added the `dtor' field.
      (chop_log_attach_to_user):  Added a `dtor' parameter.
      (chop_log_detach):  Call `dtor' if available.
    
    * src/logs.c (chop_log_mimic):  Take `dtor' into account.
    
    * guile/logs-support.c (chop_log_attach_to_scheme_user):  Updated
      accordingly.  Call `scm_gc_protect_object ()' on PROC.
      (scm_log_dtor):  New function.
    
    * tests/interfaces/choppers.c:  Strengthened a bit.
    
    * utils/chop-store-convert.c (main):  Show the number of pairs converted.

    modified files:
     ChangeLog guile/logs-support.c include/chop/logs.h
     src/chopper-anchor-based.c src/indexer-hash-tree.c src/logs.c
     tests/interfaces/choppers.c utils/chop-store-convert.c


2005-09-01 09:08:30 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-47

    Summary:
      Implemented missing methods in `store-filtered.c'.
    Revision:
      libchop--main--0.1--patch-47

    * src/store-filtered.c:  Implemented the `block_exists', `delete_block',
      `first_key' and `next_key' methods that were missing and uninitialized
      in `chop_filtered_store_open ()'.

    modified files:
     ChangeLog src/store-filtered.c


2005-08-31 15:53:33 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-46

    Summary:
      Added experimental support for QDBM;  new tool `chop-store-convert'.
    Revision:
      libchop--main--0.1--patch-46

    * src/store-qdbm.c:  New file.
    
    * src/store-smart.c:  New file.
    
    * configure.ac:  Look for QDBM.
    
    * utils/chop-store-convert.c:  New file.
    
    * guile/stores-spec.scm (smart-block-store-open):  New binding.
      (file-based-block-store-open):  New binding.
    
    * guile/stores-support.c (chop_smart_block_store_open_alloc):  New
      function.
      (chop_file_based_store_open_alloc):  New function.
    
    * include/chop/stores.h (chop_qdbm_block_store_class):  New decl.
      (chop_smart_block_store_class):  New decl.
      (chop_qdbm_store_open):  New decl.
      (chop_smart_block_store_open):  New decl.
      (chop_smart_block_store_log):  New decl.
    
    * src/Makefile.am (libchop_la_SOURCES):  Account for `store-qdbm.c' and
      `store-smart.c'.  Use `AM_CPPFLAGS' and `AM_CFLAGS' instead of their
      non-prefixed counterparts.
    
    * src/chopper-anchor-based.c (compile_multiplication_function):  Started
      an experimental thing to inline generated code.
    
    * src/store-remote.c (chop_remote_block_exists):  Fixed an uninitialized
      variable.
    
    * utils/Makefile.am (bin_PROGRAMS):  Updated.
      (LDADD):  Simplified.
    
    * utils/chop-store-list-entries.c:  Renamed to `chop-store-list.c'.

    new files:
     src/.arch-ids/store-qdbm.c.id src/.arch-ids/store-smart.c.id
     src/store-qdbm.c src/store-smart.c
     utils/.arch-ids/chop-store-convert.c.id
     utils/chop-store-convert.c

    modified files:
     ChangeLog configure.ac guile/stores-spec.scm
     guile/stores-support.c include/chop/stores.h src/Makefile.am
     src/chopper-anchor-based.c src/indexer-hash-tree.c
     src/store-remote.c utils/Makefile.am utils/chop-store-list.c

    renamed files:
     utils/.arch-ids/chop-store-list-entries.c.id
       ==> utils/.arch-ids/chop-store-list.c.id
     utils/chop-store-list-entries.c
       ==> utils/chop-store-list.c


2005-08-29 17:00:59 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-45

    Summary:
      Minor change to the build process, minor bug fix, use Lightning in `chopper-anchor-based.c'.
    Revision:
      libchop--main--0.1--patch-45

    * configure.ac:  Use `AM_PATH_LIBGCRYPT' in order to check whether the
      right `libgcrypt' is here.  Look for <lightning.h>.
    
    * src/indexer-hash-tree.c (chop_decoded_block_fetch):  Removed the
      assertion, return `CHOP_INDEXER_ERROR' and log a message instead.
    
    * src/chopper-anchor-based.c:  Look for <lightning.h> and compile and use
      `compile_multiplication_function ()' if available.

    new files:
     .arch-ids/INSTALL.id INSTALL

    modified files:
     ChangeLog README configure.ac src/chopper-anchor-based.c
     src/indexer-hash-tree.c


2005-08-26 14:02:36 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-44

    Summary:
      Have a working block server;  cleaned up the build system.
    Revision:
      libchop--main--0.1--patch-44

    * README:  Added information about the requirements.
    
    * src/Makefile.am (BUILT_SOURCES):  Augmented so that hopefully `make'
      will compile the two RPC headers before compiling `store-server.c' and
      `store-remote.c'.
    
    * tests/interfaces/Makefile.am (TESTS):  New variable.
    
    * tests/features/Makefile.am (TESTS):  New variable.
    
    * src/chop-errors.et (CHOP_DESERIAL_TOO_SHORT):  Fixed typo.
    
    * utils/chop-block-server.c (content_hash_enforced):  New variable.
      (no_collision_check):  New variable.
      (is_valid_hash_key):  New function.
      (VALIDATE_HASH_KEY):  New macro.
      (handle_say_hello):  Always return 1.
      (handle_write_block):  Call `VALIDATE_HASH_KEY ()' and look for
      collisions.
      (options):  Added new options.
      (argp):  Added the argument documentation.
    
    * ChangeLog:  New file.

    new files:
     .arch-ids/ChangeLog.id ChangeLog

    modified files:
     README src/Makefile.am src/chop-errors.et
     tests/features/Makefile.am tests/interfaces/Makefile.am
     utils/chop-block-server.c


2005-08-25 16:22:33 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-43

    Summary:
      Started implementing a toy RCS and a simple block server.
    Revision:
      libchop--main--0.1--patch-43

    * utils/chop-rcs.sh:  New file.
    
    * utils/chop-archiver.c (do_archive):  Unless `--verbose' is passed,
      print the handle on a single line so that external tools can use it.
    
    * utils/chop-block-server.c:  New file.
    
    * utils/Makefile.am:  Account for the two new files.

    new files:
     utils/.arch-ids/chop-block-server.c.id
     utils/.arch-ids/chop-rcs.sh.id utils/chop-block-server.c
     utils/chop-rcs.sh

    modified files:
     utils/Makefile.am utils/chop-archiver.c


2005-08-24 12:49:50 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-42

    Summary:
      Added an `autogen.sh'.
    Revision:
      libchop--main--0.1--patch-42

    * autogen.sh:  New file.
    

    new files:
     .arch-ids/autogen.sh.id autogen.sh


2005-08-18 15:18:44 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-41

    Summary:
      Implemented Guile bindings for block store traversal.
    Revision:
      libchop--main--0.1--patch-41

    * guile/stores-spec.scm (<chop-block-key-type>):  Added support for `out'
      parameters.  This makes it possible to use `store-first-key',
      `store-next-key', etc.

    modified files:
     guile/core-spec.scm guile/stores-spec.scm


2005-08-17 14:23:54 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-40

    Summary:
      Fixed the Scheme block store bindings.
    Revision:
      libchop--main--0.1--patch-40

    * guile/stores-support.c (scm_store_write_block):  Pass the `content'
      argument to the Scheme procedure.  Create a copy of both the buffer
      and key.
    
    * guile/stores-spec.scm (post-call-arg-cg <chop-block-key-type>):
      Release the array handle and unprotect the array.
      (unwrap-value-cg <chop-block-key-type>):  Call `scm_gc_protect_object ()'.
    
    * guile/core-spec.scm (call-cg <chop-errcode-type>):  Pass a list as a
      second argument to `scm_throw ()'.

    modified files:
     guile/Makefile.am guile/core-spec.scm guile/stores-spec.scm
     guile/stores-support.c


2005-08-12 12:44:59 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-39

    Summary:
      Fixed the weak hash cipher key phenomenon using random keys.
    Revision:
      libchop--main--0.1--patch-39

    * src/chop-errors.et (CHOP_CIPHER_WEAK_KEY):  New error.
      (CHOP_CIPHER_ERROR):  New error.
    
    * src/chop.c (chop_init):  Initialize CHOP_CIPHER_LOG.
    
    * include/chop/cipher.h (chop_cipher_log):  New declaration.
      (chop_randomize):  Likewise.
    
    * src/cipher.c (chop_cipher_log):  New variable.
      (chop_cipher_set_key):  Log error messages.
      (chop_cipher_encrypt):  Likewise.
    
    * src/indexer-hash-tree.c (chop_hash_tree_index_block):  Use `errcode_t'
      instead of `gcry_error_t' when chop functions were actually used;
      handle situations where `chop_cipher_set_key ()' returns
      CHOP_CIPHER_WEAK_KEY by creating a random key with `chop_randomize ()'.

    modified files:
     include/chop/cipher.h src/chop-errors.et src/chop.c
     src/cipher.c src/indexer-hash-tree.c


2005-08-11 15:36:20 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-38

    Summary:
      Completed the block store interface.
    Revision:
      libchop--main--0.1--patch-38

    * include/chop/stores.h (chop_store_block_exists):  New function.
      (chop_store_delete_block):  New function.
      (chop_store_first_key):  New function.
      (chop_store_next_key):  New function.
    
    * src/chop-errors.et (CHOP_STORE_END):  New error.
    
    * src/store-gdbm.c:  Implement the above methods.
    
    * src/store-tdb.c:  Likewise.
    
    * src/store-generic-db.c:  Likewise.
    
    * src/store-dummy.c:  Likewise.
    
    * src/store-remote.c:  Likewise.
    
    * utils/gdbm-list-entries.c:  Renamed to `chop-store-list-entries.c'.  Use
      chop's store interface instead of GDBM's.
    
    * utils/Makefile.am (bin_PROGRAMS):  Updated accordingly.
    
    * guile/stores-spec.scm:  Updated.
    
    * guile/stores-support.c:  Likewise.

    modified files:
     guile/stores-spec.scm guile/stores-support.c
     include/chop/stores.h src/chop-errors.et src/store-dummy.c
     src/store-gdbm.c src/store-generic-db.c src/store-remote.c
     src/store-tdb.c utils/Makefile.am
     utils/chop-store-list-entries.c

    renamed files:
     utils/.arch-ids/gdbm-list-entries.c.id
       ==> utils/.arch-ids/chop-store-list-entries.c.id
     utils/gdbm-list-entries.c
       ==> utils/chop-store-list-entries.c


2005-06-30 16:32:41 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-37

    Summary:
      Added a Guile wrapper of logs.
    Revision:
      libchop--main--0.1--patch-37

    * src/store-remote.c (chop_remote_read_block):  Set *READ on exit.
    
    * guile/logs-spec.scm:  New file.
    
    * guile/logs-support.c:  New file.
    
    * guile/indexers-spec.scm (hash-tree-indexer-log):  New procedure.

    new files:
     guile/.arch-ids/logs-spec.scm.id
     guile/.arch-ids/logs-support.c.id guile/logs-spec.scm
     guile/logs-support.c

    modified files:
     guile/Makefile.am guile/indexers-spec.scm src/store-remote.c


2005-06-30 14:12:29 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-36

    Summary:
      Added support for block stores written in Scheme.
    Revision:
      libchop--main--0.1--patch-36

    * guile/core-spec.scm (<chop-raw-u8vector>):  Renamed to
      `<chop-raw-scheme-type>'.
    
    * guile/hash-spec.scm (hash-buffer):  Reflect the above modification.
    
    * guile/choppers-spec.scm (chopper-read-block):  Likewise.
    
    * guile/streams-spec.scm (mem-stream-open):  Likewise.
    
    * guile/stores-spec.scm (make-block-store):  New procedure.
    
    * guile/stores-support.c (guile_chop_store_type):  New variable.
      (scm_store_read_block):  New function.
      (scm_store_write_block):  New function.
      (scm_store_close):  New function.
      (scm_store_sync):  New function.
      (chop_make_scheme_block_store):  Completed.

    modified files:
     guile/choppers-spec.scm guile/core-spec.scm
     guile/hash-spec.scm guile/stores-spec.scm
     guile/stores-support.c guile/streams-spec.scm


2005-06-29 13:51:32 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-35

    Summary:
      Updated and augmented the G-Wrap interface wrapping specifications.
    Revision:
      libchop--main--0.1--patch-35

    * guile/cipher-spec.scm:  New file.
    
    * guile/cipher-support.c:  New file.
    
    * guile/choppers-support.c:  Removed GCC warnings.
    
    * guile/indexers-spec.scm (hash-tree-indexer-open):  Updated.
    
    * guile/indexers-support.c (chop_hash_tree_indexer_open_alloc):  Likewise.
    
    * guile/Makefile.am (libguile_chop_la_SOURCES):  Updated.
      (EXTRA_DIST):  New variable.

    new files:
     guile/.arch-ids/cipher-spec.scm.id
     guile/.arch-ids/cipher-support.c.id guile/cipher-spec.scm
     guile/cipher-support.c

    modified files:
     guile/Makefile.am guile/choppers-support.c
     guile/indexers-spec.scm guile/indexers-support.c


2005-06-23 09:08:47 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-34

    Summary:
      Finished implementing support for decryption.  Fully working now.
    Revision:
      libchop--main--0.1--patch-34

    * README:  New file.
    
    * configure.ac:  Look for <netinet/in.h>.  Allow for G-Wrap version numbers
      higher than 1.9.5.
    
    * include/chop/chop.h (_CHOP_BEGIN_DECLS):  New macro.
      (_CHOP_END_DECLS):  New macro.
      (_CHOP_PURE_FUNC):  New macro.
    
    * include/chop/streams.h:  Use the new macros.
    
    * include/chop/logs.h:  Likewise.
    
    * include/chop/hash.h:  Likewise.
    
    * include/chop/cipher.h:  Likewise.
    
    * include/chop/serializable.h:  Likewise.
    
    * src/chop.c (chop_hex_string_to_buffer):  Added the END argument.
    
    * src/store-dummy.c (chop_dummy_block_store_read_block):  Don't issue
      a warning if BUFFER's size is different from *SIZE when ERR is not null.
    
    * src/chop-errors.et (CHOP_INDEXER_ERROR):  New error.
    
    * src/indexer-hash-tree.c (chop_chk_index_handle_t):  Added a BLOCK_SIZE
      field.
      (chk_index_handle_serialize):  Issue the block size.  Support hash keys
      with size different from that of hash keys produced by HASH_KEY_HASH_METHOD.
      (chk_index_handle_deserialize):  Likewise.
      (chop_chk_index_handle_size):  Account for the size of the BLOCK_SIZE field.
      (cipher_make_suitable_key):  New function.
      (chop_hash_tree_index_block):  Store the block size within key blocks.
      Use suitable hash key sizes.
      (chop_decoded_block_decode_header):  Return an error code when the magic
      bytes aren't there.
      (chop_decoded_block_fetch):  Support block sizes and different hash key
      sizes.  Pay attention to the value returned by
      `chop_decoded_block_decode_header ()'.

    new files:
     .arch-ids/README.id README

    modified files:
     configure.ac include/chop/chop.h include/chop/cipher.h
     include/chop/hash.h include/chop/logs.h
     include/chop/serializable.h include/chop/streams.h
     src/chop-errors.et src/chop.c src/indexer-hash-tree.c
     src/store-dummy.c


2005-06-22 09:39:20 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-33

    Summary:
      Started implementing decryption in the hash tree indexer; not fully functional yet.
    Revision:
      libchop--main--0.1--patch-33

    * include/chop/cipher.h:  Provide a complet ciphering API.
    * src/cipher.c:  Likewise.  Made `chop_cipher_handle_t' a pointer to a
      structure locally malloced and somewhat different from gcrypt's cipher
      handles.
    * tests/interfaces/cipher.c:  New file.
    * src/indexer-hash-tree.c (chk_index_handle_serialize):  Fixed the ASCII
      serialization.
      (KEY_BLOCK_HEADER_SIZE):  Added two bytes.
      (KEY_BLOCK_MAGIC_1):  New macro.
      (KEY_BLOCK_MAGIC_2):  New macro.
      (chop_key_block_fill_header):  Add two magic bytes.
      (chop_decoded_block_decode_header):  Check validity of the two magic bytes.
      (chop_hash_tree_index_block):  Pad blocks with zeroes.  Use the right
      ciphering key (was using a random key!).
      (chop_key_block_add_index):  Check the return value of
      `chop_key_block_flush ()'.
      (chop_block_tree_flush):  Likewise.
      (ciphering_context_t):  New structure.
      (chop_decoded_block_fetch):  Get a `ciphering_context_t' object; perform
      decryption based on this object.
      (chop_decoded_block_next_child):  Account for hash keys when reading
      a key block.
    * src/store-dummy.c (chop_dummy_block_store_read_block):  Issue a warning
      if *SIZE is different from the size of BUFFER.
    * src/store-filtered.c (chop_filtered_block_store_read_block):  Fixed a bug
      where *SIZE was potentially different from the size of BUFFER.

    new files:
     tests/interfaces/.arch-ids/cipher.c.id
     tests/interfaces/cipher.c

    modified files:
     include/chop/cipher.h src/cipher.c src/indexer-hash-tree.c
     src/store-dummy.c src/store-filtered.c
     tests/interfaces/Makefile.am utils/chop-archiver.c


2005-06-17 15:31:10 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-32

    Summary:
      Implemented content-hash ciphering (decryption not implemented yet).
    Revision:
      libchop--main--0.1--patch-32

    * include/chop/indexers.h (chop_hash_tree_indexer_open):  Added a new
      CIPHER_HANDLE parameter.
    
    * include/chop/cipher.h (chop_cipher_open):  Removed the KEY and KEY_SIZE
      arguments.
    
    * src/cipher.c (chop_cipher_open):  Likewise.
    
    * src/chop.c:  Removed the declaration of `chop_hash_index_handle_class'.
    
    * src/indexer-hash-tree.c (chop_hash_index_handle_class):  Removed.
      (chop_chk_index_handle_t):  Improved.  This is now the only index class
      being used here.
      (chop_hash_tree_index_block):  Perform content-hash ciphering.
      (key_block_t):  Support content-hash keys.
      (key_block_tree_t):  Likewise.
    
    * utils/chop-archiver.c:  Added a `--cipher' option.
    
    * utils/chop-file.c:  Support the new hash-tree indexer API.

    modified files:
     include/chop/cipher.h include/chop/indexers.h src/chop.c
     src/cipher.c src/indexer-hash-tree.c utils/chop-archiver.c
     utils/chop-file.c


2005-05-19 13:25:25 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-31

    Summary:
      Implemented the ciphering wrapper of gcrypt.
    Revision:
      libchop--main--0.1--patch-31

    * src/gcrypt-enum-mapping.h:  New file.
    * src/hash.c:  Include and use "gcrypt-enum-mapping.h".
    * src/cipher.c:  New file.
    * include/chop/cipher.h:  New file.

    new files:
     include/chop/.arch-ids/cipher.h.id include/chop/cipher.h
     src/.arch-ids/cipher.c.id
     src/.arch-ids/gcrypt-enum-mapping.h.id src/cipher.c
     src/gcrypt-enum-mapping.h

    modified files:
     include/Makefile.am src/Makefile.am src/hash.c


2005-05-03 17:26:45 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-30

    Summary:
      Minor changes.
    Revision:
      libchop--main--0.1--patch-30

    * src/indexer-hash-tree.c (chop_block_tree_flush):  Don't verify assertion
      when DEPTH is zero (this assertion does not hold for empty files).
    * guile/indexers-spec.scm (index-handle-ascii-deserialize):  New wrapped
      function.
    * guile/indexers-support.c (chop_index_handle_ascii_deserialize):  New function.

    modified files:
     guile/indexers-spec.scm guile/indexers-support.c
     src/indexer-hash-tree.c


2005-04-26 14:06:47 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-29

    Summary:
      Fixed various things, added test cases, implemented a memory-backed stream class.
    Revision:
      libchop--main--0.1--patch-29

    * src/stream-mem.c:  New file.
    * src/stream-file.c (chop_file_stream_t):  Now declared here.
    * include/chop/streams.h (chop_file_stream_t):  Moved type definition
      to `stream-file.c'.
      (chop_mem_stream_open):  New function declaration.
    * src/chopper-anchor-based.c (multiply_with_prime_to_the_ws):  Fixed
      pesky warning.
      (chop_anchor_chopper_read_block):  Don't return `CHOP_STREAM_END' when
      BUFFER isn't empty.
    * include/chop/choppers.h (chop_chopper_class_t):  New metaclass.
      (chop_fixed_size_chopper_class):  Made a `chop_chopper_class_t'.
      (chop_anchor_based_chopper_class):  Likewise.
    * src/indexer-hash-tree.c (chop_hash_tree_indexer_open):  Call
      `chop_object_initialize ()'.
    * utils/chop-archiver.c (options):  Added `-C'.
      (process_command):  Use `chop_chopper_generic_open ()'.
    * tests/interfaces/choppers.c:  New file.
    * guile/store-ctors-dtors.c:  Renamed to `stores-support.c'.
    * guile/stream-ctors-dtors.c:  Likewise.
    * guile/streams-spec.scm:  Added `mem-stream-open'.
    * guile/core-spec.scm:  Added `unwrap-value-cg' for `<chop-raw-u8vector>'.
    * src/extract-classes.sh:  Use `void *' instead of `chop_class_t *' so as
      to shut up GCC warnings.
    * src/chop.c (chop_class_lookup):  Likewise.

    new files:
     src/.arch-ids/stream-mem.c.id src/stream-mem.c
     tests/interfaces/.arch-ids/choppers.c.id
     tests/interfaces/choppers.c

    modified files:
     guile/core-spec.scm guile/stores-spec.scm
     guile/stores-support.c guile/streams-spec.scm
     guile/streams-support.c include/chop/choppers.h
     include/chop/streams.h src/Makefile.am src/chop.c
     src/chopper-anchor-based.c src/chopper-fixed-size.c
     src/extract-classes.sh src/indexer-hash-tree.c
     src/stream-file.c tests/interfaces/Makefile.am
     utils/chop-archiver.c utils/chop-file.c
     utils/chop-show-anchors.c utils/chop-show-similarities.c

    renamed files:
     guile/.arch-ids/store-ctors-dtors.c.id
       ==> guile/.arch-ids/stores-support.c.id
     guile/.arch-ids/stream-ctors-dtors.c.id
       ==> guile/.arch-ids/streams-support.c.id
     guile/store-ctors-dtors.c
       ==> guile/stores-support.c
     guile/stream-ctors-dtors.c
       ==> guile/streams-support.c


2005-04-19 09:16:07 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-28

    Summary:
      Implemented a TDB-based block store.
    Revision:
      libchop--main--0.1--patch-28

    * src/stores.c:  New file.
    * src/store-tdb.c:  New file.
    * src/store-generic-db.c:  New file.
    * src/store-gdbm.c:  Include "store-generic-db.c".  Define the `generic_open'
      method of `chop_file_based_store_class_t'.
    * include/chop/serializable.h (CHOP_DEFINE_RT_CLASS_WITH_METACLASS):  New macro.
      (CHOP_DECLARE_RT_CLASS_WITH_METACLASS):  New macro.
    * include/chop/stores.h (chop_file_based_store_class_t):  New metaclass.
      (chop_file_based_store_open):  New function.
      (chop_tdb_block_store_class):  New class.
      (chop_gdbm_block_store_class):  Made it a `chop_file_based_store_class_t'.
      (chop_gdbm_store_open):  Added the OPEN_FLAGS argument.
    * src/extract-classes.sh:  Account for the `WITH_METACLASS' macro variants.
    * utils/chop-archiver.c:  Added a `-S' switch.
    * tests/interfaces/stores.c:  New test.
    * configure.ac:  Check for `tdb.h' and `libtdb'.
    * guile/stores-spec.scm (tdb-block-store-open):  New wrapped function.
    * guile/store-ctors-dtors.c (chop_tdb_block_store_open_alloc):  New function.

    new files:
     src/.arch-ids/store-generic-db.c.id
     src/.arch-ids/store-tdb.c.id src/.arch-ids/stores.c.id
     src/store-generic-db.c src/store-tdb.c src/stores.c
     tests/interfaces/.arch-ids/stores.c.id
     tests/interfaces/stores.c

    modified files:
     configure.ac guile/store-ctors-dtors.c guile/stores-spec.scm
     include/chop/choppers.h include/chop/serializable.h
     include/chop/stores.h src/Makefile.am src/extract-classes.sh
     src/store-gdbm.c tests/interfaces/Makefile.am
     utils/chop-archiver.c


2005-04-07 11:38:58 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-27

    Summary:
      Fixed the class lookup mechanism; added a test case.
    Revision:
      libchop--main--0.1--patch-27

    * src/chop.c (chop_class_lookup):  Fixed the call to
      `chop_lookup_class_entry' (pass strlen + 1).
    * src/Makefile.am (class-lookup.c):  Ask gperf to produce read-only tables.
    * include/chop/serializable.h:  Added comments for `chop_class_lookup ()'.
    * tests/interfaces/class-lookup.c:  New file.

    new files:
     tests/interfaces/.arch-ids/class-lookup.c.id
     tests/interfaces/class-lookup.c

    modified files:
     include/chop/serializable.h src/Makefile.am src/chop.c
     tests/interfaces/Makefile.am


2005-04-07 09:44:24 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-26

    Summary:
      Implemented O(1) class lookup by name using GPerf.
    Revision:
      libchop--main--0.1--patch-26

    * include/chop/serializable.h (chop_class_lookup):  New function.
    * src/chop.c:  Likewise.
    * src/extract-classes.sh:  New file.
    * src/Makefile.am:  Generate `class-lookup.c' when GPerf is available.
    * configure.ac:  Look for GPerf.

    new files:
     src/.arch-ids/extract-classes.sh.id src/extract-classes.sh

    modified files:
     configure.ac include/chop/serializable.h src/Makefile.am
     src/chop.c


2005-04-06 16:50:12 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-25

    Summary:
      Completed the RPC specs and the remote block store.
    Revision:
      libchop--main--0.1--patch-25

    * rpc/block_rstore.x:  Completed the RPC interface.
    * include/chop/block-server.h:  Added typed hooks for each RPC.
    * src/store-server.c:  Likewise.
    * src/store-remote.c:  Implemented read, write, sync and close.
    * src/store-gdbm.c (chop_gdbm_read_block):  Set *SIZE.
    * utils/chop-archiver.c:  Added the `--remote' option.
    * guile/streams-spec.scm:  Added `stream-close'.
    * guile/stores-spec.scm:  Added `store-sync' and `store-close'.

    modified files:
     guile/stores-spec.scm guile/streams-spec.scm
     include/chop/block-server.h rpc/block_rstore.x src/Makefile.am
     src/store-gdbm.c src/store-remote.c src/store-server.c
     utils/chop-archiver.c


2005-04-01 16:03:43 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-24

    Summary:
      Some more RPC work.
    Revision:
      libchop--main--0.1--patch-24

    * include/chop/blocks.h:  Removed.
    * include/chop/block-server.h:  New file.
    * include/Makefile.am:  New file.
    * src/store-server.c:  New file.
    * src/Makefile.am (lib_LTLIBRARIES):  Added `libchop-block-server.la'.
    * rpc/block_rstore.x:  Minor changes.
    * src/store-remote.c:  Likewise.

    new files:
     include/.arch-ids/Makefile.am.id include/Makefile.am
     include/chop/.arch-ids/block-server.h.id
     include/chop/block-server.h src/.arch-ids/store-server.c.id
     src/store-server.c

    removed files:
     include/chop/.arch-ids/blocks.h.id include/chop/blocks.h

    modified files:
     Makefile.am configure.ac include/chop/stores.h
     rpc/block_rstore.x src/Makefile.am src/store-remote.c
     src/stream-file.c


2005-03-31 16:26:28 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-23

    Summary:
      Got the main components available from Guile.
    Revision:
      libchop--main--0.1--patch-23

    * include/chop/indexer-hash-tree.h:  Removed.
    * include/chop/indexers.h:  Added stuff formerly in `indexer-hash-tree.h';
      made `chop_indexer_t' a run-time class.
    * src/indexer-hash-tree.c:  Added run-time class stuff.
    * utils/chop-file.c:  No longer rely on `indexer-hash-tree.h' and
      `chop_hash_tree_indexer_t'.
    * utils/chop-archiver.c:  Likewise.
    * guile/:  Added specifications and support code for choppers and
      indexers.  Finished the `store' specifications.

    new files:
     guile/.arch-ids/choppers-spec.scm.id
     guile/.arch-ids/choppers-support.c.id
     guile/.arch-ids/indexers-spec.scm.id
     guile/.arch-ids/indexers-support.c.id guile/choppers-spec.scm
     guile/choppers-support.c guile/indexers-spec.scm
     guile/indexers-support.c

    removed files:
     include/chop/.arch-ids/indexer-hash-tree.h.id
     include/chop/indexer-hash-tree.h

    modified files:
     guile/Makefile.am guile/core-spec.scm guile/hash-spec.scm
     guile/store-ctors-dtors.c guile/stores-spec.scm
     guile/streams-spec.scm include/chop/indexers.h
     include/chop/serializable.h src/indexer-hash-tree.c
     utils/chop-archiver.c utils/chop-file.c


2005-03-25 16:56:23 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-22

    Summary:
      Augmented the Guile bindings.
    Revision:
      libchop--main--0.1--patch-22

    * guile/hash-support.c:  New file.
    * guile/core-spec.scm:  Added (writable) input buffers as SRFI-4 vectors.
    * guile/streams-spec.scm:  Almost completed.
    * guile/hash-spec.scm:  Completed.
    * guile/stores-spec.scm:  Some work left.

    new files:
     guile/.arch-ids/hash-support.c.id guile/hash-support.c

    modified files:
     guile/Makefile.am guile/core-spec.scm guile/hash-spec.scm
     guile/store-ctors-dtors.c guile/stores-spec.scm
     guile/streams-spec.scm


2005-03-23 16:39:36 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-21

    Summary:
      More Guile and G-Wrap work on input buffers as SRFI-4 u8vectors.
    Revision:
      libchop--main--0.1--patch-21

    * guile/core-spec.scm:  Finished specifying `<chop-input-buffer-type>' and
      `<chop-writable-input-buffer-type>' using Guile 1.7's SRFI-4 u8vectors.
    * guile/store-ctors-dtors.c:  New file.
    * guile/stores-spec.scm:  New file.

    new files:
     guile/.arch-ids/store-ctors-dtors.c.id
     guile/.arch-ids/stores-spec.scm.id guile/store-ctors-dtors.c
     guile/stores-spec.scm

    modified files:
     configure.ac guile/Makefile.am guile/core-spec.scm
     guile/hash-spec.scm guile/stream-ctors-dtors.c
     guile/streams-spec.scm


2005-03-22 15:02:27 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-20

    Summary:
      Added a filtered block store implementation.
    Revision:
      libchop--main--0.1--patch-20

    * src/store-filtered.c:  New file.
    * include/chop/filters.h (chop_filtered_block_store_class):  New declaration.
      (chop_filter_set_input_from_buffer):  New function.
      (chop_filter_finish_input_from_buffer):  New function.
      (chop_filtered_store_open):  New function.
      (chop_filter_push):  Added a new `pushed' argument.
    * src/filters.c:  Implement these new functions.
    * src/filter-zlib-zip.c (ZIP_RESET_PROCESSING):  New macro.
    * src/filter-zlib-unzip.c (ZIP_RESET_PROCESSING):  New macro.
    * src/filter-zip-push-pull.c (ZIP_PUSH_METHOD):  Play with the new `pushed'
      argument.
      (ZIP_PULL_METHOD):  Use the new macro `ZIP_RESET_PROCESSING'.
    * test/interfaces/filters.c (handle_input_fault):  Pass a new argument to
      `chop_filter_push ()'.
    * test/features/filter-zlib.c (handle_random_input_fault):  Likewise.
      (handle_zipped_input_fault):  Likewise.
      (main):  Made `output' larger than `SIZE_OF_INPUT' in order to get a
      behavior closer to real-life.
    * src/indexer-hash-tree.c (hash_index_handle_serialize):  Add a trailing
      zero to the buffer returned when in ASCII mode.
    * src/chop-archiver.c (main):  Use a zlib-filtered store if `-z' or `--zip'
      is passed.

    new files:
     src/.arch-ids/store-filtered.c.id src/store-filtered.c

    modified files:
     include/chop/filters.h src/Makefile.am
     src/filter-zip-push-pull.c src/filter-zlib-unzip.c
     src/filter-zlib-zip.c src/filters.c src/indexer-hash-tree.c
     tests/features/filter-zlib.c tests/interfaces/filters.c
     utils/chop-archiver.c


2005-03-21 17:28:07 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-19

    Summary:
      More zlib zip/unzip work.  Seems to be in a working state now.
    Revision:
      libchop--main--0.1--patch-19

    * src/chop-errors.et (CHOP_FILTER_ERROR):  New error.
    * src/filter-zip-push-pull.c:  Fixed a number of things.
    * src/filter-zlib-zip.c:  Define `ZIP_CANT_PRODUCE_MORE' and
      `ZIP_INPUT_CORRUPTED'.
    * src/filter-zlib-unzip.c:  Likewise.
    * tests/features/filter-zlib.c:  Commented and refined.
    * tests/interfaces/filters.c:  Likewise.

    modified files:
     src/chop-errors.et src/filter-zip-push-pull.c
     src/filter-zlib-unzip.c src/filter-zlib-zip.c
     tests/features/filter-zlib.c tests/interfaces/filters.c


2005-03-21 14:06:20 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-18

    Summary:
      Improved `chop-archiver'.
    Revision:
      libchop--main--0.1--patch-18

    * utils/chop-archiver.c:  Use `argp' for argument parsing.  Added user
      documentation.  Fixed a few bugs in the archiving code.
    * configure.ac:  Look for `argp.h'.

    modified files:
     configure.ac utils/chop-archiver.c


2005-03-18 14:21:01 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-17

    Summary:
      More zlib work.
    Revision:
      libchop--main--0.1--patch-17

    * src/filters.c:  New file.
    * src/filter-zlib.c:  Renamed to `filter-zlib-zip.c'.
    * src/filter-zlib-unzip.c:  New file.
    * src/filter-zip-push-pull.c:  New file.
    * tests/features/filter-zlib.c:  New file.
    * include/chop/serializable.h:  Added ctor/dtor accessors.

    new files:
     src/.arch-ids/filter-zip-push-pull.c.id
     src/.arch-ids/filter-zlib-unzip.c.id
     src/.arch-ids/filters.c.id src/filter-zip-push-pull.c
     src/filter-zlib-unzip.c src/filters.c
     tests/features/.arch-ids/=id
     tests/features/.arch-ids/Makefile.am.id
     tests/features/.arch-ids/filter-zlib.c.id
     tests/features/Makefile.am tests/features/filter-zlib.c

    modified files:
     configure.ac guile/core-spec.scm include/chop/filters.h
     include/chop/serializable.h src/Makefile.am
     src/filter-zlib-zip.c tests/Makefile.am

    renamed files:
     src/.arch-ids/filter-zlib.c.id
       ==> src/.arch-ids/filter-zlib-zip.c.id
     src/filter-zlib.c
       ==> src/filter-zlib-zip.c

    new directories:
     tests/features tests/features/.arch-ids


2005-03-17 09:29:38 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-16

    Summary:
      Implemented a zlib-based zip filter; added G-Wrap stuff.
    Revision:
      libchop--main--0.1--patch-16

    * src/filter-zlib.c:  New file.
    * include/chop/filters.h:  Polished things a bit.
    * test/interfaces/filters.c:  New file.
    * utils/*.c:  Added calls to `chop_init ()' and/or verification of its
      returned error code.
    * guile/core-spec.scm:  New file.
    * guile/hash-spec.scm:  New file.
    * configure.ac:  Look for `libz' and `zlib.h'.

    new files:
     guile/.arch-ids/core-spec.scm.id
     guile/.arch-ids/hash-spec.scm.id guile/core-spec.scm
     guile/hash-spec.scm src/.arch-ids/filter-zlib.c.id
     src/filter-zlib.c tests/.arch-ids/=id
     tests/.arch-ids/Makefile.am.id tests/Makefile.am
     tests/interfaces/.arch-ids/=id
     tests/interfaces/.arch-ids/Makefile.am.id
     tests/interfaces/.arch-ids/filters.c.id
     tests/interfaces/Makefile.am tests/interfaces/filters.c

    modified files:
     Makefile.am configure.ac guile/Makefile.am
     guile/streams-spec.scm include/chop/filters.h src/Makefile.am
     src/chop-errors.et utils/chop-archiver.c
     utils/chop-show-similarities.c {arch}/=tagging-method

    new directories:
     tests tests/.arch-ids tests/interfaces
     tests/interfaces/.arch-ids


2005-03-11 16:14:24 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-15

    Summary:
      Started writing Guile bindings using G-Wrap.
    Revision:
      libchop--main--0.1--patch-15

    * configure.ac:  Added Guile and G-Wrap-related tests.  Added more
      `AC_CHECK_LIB's.
    * Makefile.am:  Add `guile' to `SUBDIRS' if `HAVE_GUILE' is defined.
    * guile/:  New directory.  Nothing usable yet.

    new files:
     guile/.arch-ids/=id guile/.arch-ids/Makefile.am.id
     guile/.arch-ids/stream-ctors-dtors.c.id
     guile/.arch-ids/streams-spec.scm.id
     guile/.arch-ids/test.scm.id guile/Makefile.am
     guile/stream-ctors-dtors.c guile/streams-spec.scm
     guile/test.scm

    modified files:
     Makefile.am configure.ac

    new directories:
     guile guile/.arch-ids


2005-03-08 18:05:07 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-14

    Summary:
      Added the remote store client.
    Revision:
      libchop--main--0.1--patch-14

    * rpc/block_rstore.x:  New file.
    * src/store-remote.c:  New file.
    * src/Makefile.am:  Produce client-side RPC stubs.
    * include/chop/stores.h:  Added the remote block store class and constructor.

    new files:
     rpc/.arch-ids/=id rpc/.arch-ids/block_rstore.x.id
     rpc/block_rstore.x src/.arch-ids/store-remote.c.id
     src/store-remote.c

    modified files:
     include/chop/stores.h src/Makefile.am

    new directories:
     rpc rpc/.arch-ids


2005-03-07 17:41:44 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-13

    Summary:
      Some more work with the anchor-based chopper.
    Revision:
      libchop--main--0.1--patch-13

    * include/chop/serializable.h (chop_class_alloca_instance):  Cast the result
      into a `char *' to avoid pointer type warnings.
    * include/chop/hash.h (chop_hash_name):  Renamed to `chop_hash_method_name'.
      (chop_hash_gcrypt_name):  Likewise.
      (chop_hash_lookup):  Likewise.
      (chop_hash_buffer):  New function.
    * src/hash.c:  Same as above.  Use an O(1) lookup for methods.
    * utils/chop-show-similarities.c:  New file.
    * utils/Makefile.am:  Added `chop-show-similarities'.
    * src/chopper-anchor-based.c (chop_anchor_chopper_read_block):  Return blocks
      up to the end of the current sliding window.
    * src/find-anchors.scm:  Likewise.
    

    new files:
     utils/.arch-ids/chop-show-similarities.c.id
     utils/chop-show-similarities.c

    modified files:
     include/chop/hash.h include/chop/serializable.h
     include/chop/streams.h src/chopper-anchor-based.c
     src/find-anchors.scm src/hash.c src/indexer-hash-tree.c
     src/stream-file.c utils/Makefile.am utils/chop-archiver.c
     utils/chop-file.c utils/chop-show-anchors.c


2005-03-04 13:00:42 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-12

    Summary:
      Fixed (most of?) the anchor-based chopper's bugs.
    Revision:
      libchop--main--0.1--patch-12

    * include/chop/choppers.h (chop_chopper_close):  New method.
      (chop_chopper_t):  New `close' field.
    * src/find-anchors.scm:  Fixed a few bugs compared to the paper.
    * src/chopper-anchor-based.c (chop_anchor_chopper_close):  New function.
      (chop_anchor_based_chopper_init):  Implement `close'.
      (chop_anchor_based_chopper_t):  Added a `sliding_window' field; removed
      the `cached_window*' fields.
      (chop_anchor_chopper_read_block):  Brought in sync with `find-anchors.scm'
      and with the paper.  Use a global sliding window.
    * src/chopper-fixed-size.c (chop_fixed_size_chopper_init):  Set
      `close' to NULL;  call `chop_object_initialize ()'.

    modified files:
     include/chop/choppers.h src/chopper-anchor-based.c
     src/chopper-fixed-size.c src/find-anchors.scm
     utils/chop-show-anchors.c


2005-02-24 14:25:17 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-11

    Summary:
      Implemented an anchor-based stream chopper à la Udi Manber.
    Revision:
      libchop--main--0.1--patch-11

    * src/chopper-anchor-based.c, src/find-anchors.scm: New files.
    * include/chop/choppers.h (chop_chopper_t):  Use the run-time class mechanism.
      (chop_anchor_based_chopper_init):  New function declaration.
      (chop_anchor_based_chopper_class):  New variable declaration.
    * src/chopper-fixed-size.c:  Implement CHOP_CHOPPER_CLASS and
      CHOP_FIXED_SIZE_CHOPPER_CLASS.

    new files:
     src/.arch-ids/chopper-anchor-based.c.id
     src/.arch-ids/find-anchors.scm.id src/chopper-anchor-based.c
     src/find-anchors.scm utils/.arch-ids/chop-show-anchors.c.id
     utils/chop-show-anchors.c

    modified files:
     include/chop/choppers.h src/Makefile.am src/chop-errors.et
     src/chopper-fixed-size.c utils/Makefile.am


2005-02-21 17:15:38 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-10

    Summary:
      Fixed the hash tree indexer; added debugging message loggers.
    Revision:
      libchop--main--0.1--patch-10

    * src/logs.c, include/chop/logs.h:  New files.
    * src/indexer-hash-tree.c (chop_block_tree_flush):  Add the key of the
      newly flushed block to its parent.  This fixes a bug where only part of a
      stream was actually indexed.
      (chop_hash_tree_indexer_t):  Added a `log' field.  Use that log for
      debug messages rather than `fprintf'.
      (chop_hash_tree_indexer_log):  New function.
    * src/store-dummy.c (chop_dummy_block_store_t):  Added a `log' field.
      Use that log rather than `fprintf'.
      (chop_dummy_block_store_log):  New function.
    * src/Makefile.am (CPPFLAGS):  Added `_GNU_SOURCE' (for `vasprintf').
    * utils/chop-archiver.c:  Use the indexer's message logger.
    * configure.ac:  Look for `vasprintf' (GNU libc).

    new files:
     include/chop/.arch-ids/logs.h.id include/chop/logs.h
     src/.arch-ids/logs.c.id src/logs.c

    modified files:
     configure.ac include/chop/indexer-hash-tree.h
     include/chop/stores.h src/Makefile.am src/indexer-hash-tree.c
     src/store-dummy.c utils/chop-archiver.c


2005-02-10 12:25:19 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-9

    Summary:
      Completed the hash tree indexer and the GDBM store.
    Revision:
      libchop--main--0.1--patch-9

    * include/chop/streams.h:  Have `chop_stream_t' inherit from
      `chop_object_t'.
    * src/indexer-hash-tree.c (hash_index_handle_serialize):  In ASCII,
      output the hash method name followed by a colon.
      (chop_hash_tree_fetch_stream):  Implemented.
      (chop_hash_tree_stream_t):  New class.
    * src/store-dummy.c (chop_dummy_proxy_block_store_open):  New
      function.
    * src/store-gdbm.c:  Implementation complete.
    * src/chopper-fixed-size.c (chop_fixed_size_chopper_init):  Added a
      PAD_BLOCKS argument.
    * src/buffers.c (chop_buffer_grow):  Fixed a bug for zero-sized buffers.
    * utils/gdbm-list-entries.c:  New file.
    * utils/chop-archiver.c:  New file.
    * utils/chop-file.c:  Use `chop_class_alloca_instance ()' instead of
      automatic variables.

    new files:
     utils/.arch-ids/chop-archiver.c.id
     utils/.arch-ids/gdbm-list-entries.c.id utils/chop-archiver.c
     utils/gdbm-list-entries.c

    modified files:
     include/chop/chop.h include/chop/choppers.h
     include/chop/hash.h include/chop/indexer-hash-tree.h
     include/chop/serializable.h include/chop/stores.h
     include/chop/streams.h src/buffers.c src/chop-errors.et
     src/chop.c src/chopper-fixed-size.c src/hash.c
     src/indexer-hash-tree.c src/store-dummy.c src/store-gdbm.c
     src/stream-file.c utils/Makefile.am utils/chop-file.c


2005-02-08 09:43:02 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-8

    Summary:
      Implemented the creation of block hash key trees.
    Revision:
      libchop--main--0.1--patch-8

    * include/chop/indexers.h (chop_indexer_index_blocks):  Added a
      `metadatastore' argument.
      (chop_indexer_fetch_stream):  Likewise.
      include/chop/indexer-hash-tree.h:  Added a `keys_per_block' argument to
      `chop_hash_tree_indexer_open ()'.
    
    * src/indexer-hash-tree.c:  Implemented block key trees.

    modified files:
     include/chop/indexer-hash-tree.h include/chop/indexers.h
     include/chop/stores.h src/Makefile.am src/indexer-hash-tree.c
     src/store-dummy.c utils/Makefile.am utils/chop-file.c


2005-02-05 11:50:00 GMT	Ludovic Court`es <ludo@chbouib.org>	patch-7

    Summary:
      Tiny bug fix in `chop_buffer_to_hex_string ()'.
    Revision:
      libchop--main--0.1--patch-7

    * src/chop.c (chop_buffer_to_hex_string):  Use `unsigned char *' instead of
      `char *'.  This fixes a bug on IA32 not present on PPC32.
    

    modified files:
     src/chop.c


2005-02-03 09:01:56 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-6

    Summary:
      Various fixes; started implementing index handles.
    Revision:
      libchop--main--0.1--patch-6

    * stream-file.c (chop_file_stream_read):  Copy the data from FILE located
      at FILE->POSITION instead of the data at offset zero.
    * configure.ac:  Look for "obstack.h".
    * src/indexer-hash-tree.c:  Use an obstack when allocating block keys.
      Implemented the serialization of `chop_hash_index_handle_t' objects.
    * src/chopper-fixed-size.c:  Added forgotten file.
    * src/Makefile.am:  Fixed the multi-target rule for chop-errors.[ch].
    

    new files:
     src/.arch-ids/chopper-fixed-size.c.id src/chopper-fixed-size.c

    modified files:
     configure.ac include/chop/chop.h
     include/chop/indexer-hash-tree.h include/chop/indexers.h
     include/chop/serializable.h src/Makefile.am src/chop.c
     src/indexer-hash-tree.c src/stream-file.c utils/chop-file.c


2005-02-02 14:08:59 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-5

    Summary:
      Towards a complete interface: added `indexers' and `index handles'.
    Revision:
      libchop--main--0.1--patch-5

    * include/chop/indexers.h:  Augmented the interface definition.
    * src/store-hash-tree.c:  Renamed to `indexer-hash-tree.c'.
    * include/chop/store-hash-tree.h:  Renamed to `indexer-hash-tree.h'.
    * src/hash.c, include/chop/hash.h:  New files.
    * include/chop/serializable.h:  New file.
    * src/store-dummy.c:  New file.
    * src/buffers.c (chop_buffer_push):  Set BUFFER->SIZE.

    new files:
     include/chop/.arch-ids/hash.h.id
     include/chop/.arch-ids/serializable.h.id include/chop/hash.h
     include/chop/serializable.h src/.arch-ids/hash.c.id
     src/.arch-ids/store-dummy.c.id src/hash.c src/store-dummy.c

    modified files:
     configure.ac include/chop/buffers.h include/chop/chop.h
     include/chop/choppers.h include/chop/indexer-hash-tree.h
     include/chop/indexers.h include/chop/stores.h
     include/chop/streams.h src/Makefile.am src/buffers.c
     src/chop.c src/indexer-hash-tree.c utils/chop-file.c

    renamed files:
     include/chop/.arch-ids/store-hash-tree.h.id
       ==> include/chop/.arch-ids/indexer-hash-tree.h.id
     include/chop/store-hash-tree.h
       ==> include/chop/indexer-hash-tree.h
     src/.arch-ids/store-hash-tree.c.id
       ==> src/.arch-ids/indexer-hash-tree.c.id
     src/store-hash-tree.c
       ==> src/indexer-hash-tree.c


2005-01-28 16:12:24 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-4

    Summary:
      Minor changes.
    Revision:
      libchop--main--0.1--patch-4

    * include/chop/indexers.h:  New file.
    * configure.ac:  Fixed a few things.
    * src/Makefile.am:  Move "chop-errors.h" to "include/chop".

    new files:
     include/chop/.arch-ids/indexers.h.id include/chop/indexers.h

    modified files:
     configure.ac src/Makefile.am src/store-hash-tree.c


2005-01-26 18:13:02 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-3

    Summary:
      Implemented a hash tree store;  things compile and run!
    Revision:
      libchop--main--0.1--patch-3

    * include/chop:  New directory.
    * src/*.h:  Moved to include/chop.
    * store-hash-tree.c, buffers.c, buffers.h, store-hash-tree.h:  New files.

    new files:
     include/.arch-ids/=id include/chop/.arch-ids/=id
     include/chop/.arch-ids/buffers.h.id
     include/chop/.arch-ids/store-hash-tree.h.id
     include/chop/buffers.h include/chop/store-hash-tree.h
     src/.arch-ids/buffers.c.id src/.arch-ids/store-hash-tree.c.id
     src/buffers.c src/store-hash-tree.c

    modified files:
     include/chop/chop.h include/chop/choppers.h
     include/chop/stores.h include/chop/streams.h src/Makefile.am
     src/chop-errors.et src/chop.c src/store-gdbm.c
     src/stream-file.c utils/Makefile.am utils/chop-file.c

    renamed files:
     src/.arch-ids/blocks.h.id
       ==> include/chop/.arch-ids/blocks.h.id
     src/.arch-ids/chop.h.id
       ==> include/chop/.arch-ids/chop.h.id
     src/.arch-ids/choppers.h.id
       ==> include/chop/.arch-ids/choppers.h.id
     src/.arch-ids/filters.h.id
       ==> include/chop/.arch-ids/filters.h.id
     src/.arch-ids/stores.h.id
       ==> include/chop/.arch-ids/stores.h.id
     src/.arch-ids/streams.h.id
       ==> include/chop/.arch-ids/streams.h.id
     src/blocks.h
       ==> include/chop/blocks.h
     src/chop.h
       ==> include/chop/chop.h
     src/choppers.h
       ==> include/chop/choppers.h
     src/filters.h
       ==> include/chop/filters.h
     src/stores.h
       ==> include/chop/stores.h
     src/streams.h
       ==> include/chop/streams.h

    new directories:
     include include/.arch-ids include/chop include/chop/.arch-ids


2005-01-24 18:38:00 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-2

    Summary:
      Some more meat.
    Revision:
      libchop--main--0.1--patch-2

    * filters.h:  New file.
    * choppers.h:  New file.
    * store-gdbm.c:  New file.

    new files:
     src/.arch-ids/choppers.h.id src/.arch-ids/filters.h.id
     src/.arch-ids/store-gdbm.c.id src/.arch-ids/stores.h.id
     src/choppers.h src/filters.h src/store-gdbm.c src/stores.h

    modified files:
     src/Makefile.am src/chop-errors.et src/chop.c src/chop.h
     src/stream-file.c src/streams.h


2005-01-24 12:46:55 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-1

    Summary:
      Augmented `stream-file.c'.
    Revision:
      libchop--main--0.1--patch-1

    * stream-file.c:  Added new functions.

    new files:
     src/.arch-ids/=id src/.arch-ids/Makefile.am.id
     src/.arch-ids/blocks.h.id src/.arch-ids/chop-errors.et.id
     src/.arch-ids/chop.c.id src/.arch-ids/chop.h.id
     src/.arch-ids/stream-ext2.c.id src/.arch-ids/stream-file.c.id
     src/.arch-ids/streams.h.id src/Makefile.am src/blocks.h
     src/chop-errors.et src/chop.c src/chop.h src/stream-ext2.c
     src/stream-file.c src/streams.h utils/.arch-ids/=id
     utils/.arch-ids/Makefile.am.id utils/.arch-ids/chop-file.c.id
     utils/Makefile.am utils/chop-file.c

    modified files:
     {arch}/=tagging-method

    new directories:
     src src/.arch-ids utils utils/.arch-ids


2005-01-21 16:53:26 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	base-0

    Summary:
      Initial import of libchop.
    Revision:
      libchop--main--0.1--base-0

    Initial import of libchop.

    new files:
     Makefile.am configure.ac


